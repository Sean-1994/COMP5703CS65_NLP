{"version":3,"sources":["webpack:///./src/views/logs/logs.vue?7c90","webpack:///./src/views/logs/logs.vue?cb33","webpack:///src/views/logs/logs.vue","webpack:///./src/views/logs/logs.vue?1f27","webpack:///./src/views/logs/logs.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","$lang","logs","tree","defaultProps","on","onNodeClick","content","editorOptions","onEditorCodeChange","model","value","callback","$$v","code","expression","staticRenderFns","name","data","projectName","clientData","loading","children","label","activeFile","activeNode","modeMap","py","js","html","vue","md","scss","css","php","tabSize","mode","theme","lineNumbers","styleActiveLine","line","keyMap","extraKeys","Tab","foldGutter","gutters","styleSelectedText","highlightSelectionMatches","showToken","annotateScrollbar","components","PanelTitle","codemirror","created","getProjectTree","methods","$http","get","then","catch","onChangeCode","join","path","extension","post","onRenameFile","$prompt","confirmButtonText","cancelButtonText","inputValue","inputPattern","inputErrorMessage","pre","new","onCreateFile","onDeleteFile","$confirm","type","component"],"mappings":"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","file":"static/js/chunk-5d4e4289.0412a92a.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logs.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',[_c('el-col',{attrs:{\"span\":4}},[_c('div',{staticClass:\"panel\",attrs:{\"id\":\"tree\"}},[_c('panel-title',{attrs:{\"title\":_vm.$lang.logs.tree}}),_c('div',{staticClass:\"panel-body\"},[_c('el-tree',{attrs:{\"data\":_vm.tree,\"props\":_vm.defaultProps},on:{\"node-click\":_vm.onNodeClick}})],1)],1)]),_c('el-col',{attrs:{\"span\":20}},[_c('div',{staticClass:\"panel m-l-md\"},[_c('panel-title',{attrs:{\"title\":_vm.$lang.logs.content}}),_c('div',{staticClass:\"panel-body\"},[_c('codemirror',{attrs:{\"options\":_vm.editorOptions},on:{\"input\":_vm.onEditorCodeChange},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}})],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-row>\r\n    <el-col :span=\"4\">\r\n      <div class=\"panel\" id=\"tree\">\r\n        <panel-title :title=\"$lang.logs.tree\"> </panel-title>\r\n        <div class=\"panel-body\">\r\n          <el-tree\r\n            :data=\"tree\"\r\n            :props=\"defaultProps\"\r\n            @node-click=\"onNodeClick\"\r\n          ></el-tree>\r\n        </div>\r\n      </div>\r\n    </el-col>\r\n    <el-col :span=\"20\">\r\n      <div class=\"panel m-l-md\">\r\n        <panel-title :title=\"$lang.logs.content\">\r\n\r\n        </panel-title>\r\n        <div class=\"panel-body\">\r\n          <codemirror\r\n            v-model=\"code\"\r\n            :options=\"editorOptions\"\r\n            @input=\"onEditorCodeChange\"\r\n          >\r\n          </codemirror>\r\n        </div>\r\n      </div>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n\r\n<script>\r\nimport PanelTitle from \"../../components/PanelTitle\";\r\nimport { codemirror } from \"vue-codemirror\";\r\n\r\n// Theme\r\nimport \"codemirror/theme/monokai.css\";\r\n\r\n// Base Style\r\nimport \"codemirror/lib/codemirror.css\";\r\n\r\n// Extra Keys\r\nimport \"codemirror/addon/hint/show-hint\";\r\nimport \"codemirror/addon/hint/javascript-hint\";\r\nimport \"codemirror/addon/hint/sql-hint\";\r\nimport \"codemirror/addon/hint/html-hint\";\r\nimport \"codemirror/addon/hint/xml-hint\";\r\nimport \"codemirror/addon/hint/anyword-hint\";\r\nimport \"codemirror/addon/hint/css-hint\";\r\nimport \"codemirror/addon/hint/show-hint\";\r\n\r\n// Key Map\r\nimport \"codemirror/keymap/sublime\";\r\n\r\n// CloseBrackets\r\nimport \"codemirror/addon/edit/closebrackets\";\r\n\r\n// Active Line\r\nimport \"codemirror/addon/selection/active-line\";\r\n\r\n// StyleSelectedText\r\nimport \"codemirror/addon/selection/mark-selection\";\r\nimport \"codemirror/addon/search/searchcursor\";\r\n\r\n// Hint\r\nimport \"codemirror/addon/hint/show-hint\";\r\nimport \"codemirror/addon/hint/show-hint.css\";\r\nimport \"codemirror/addon/hint/anyword-hint\";\r\n\r\n// foldGutter\r\nimport \"codemirror/addon/fold/foldgutter.css\";\r\nimport \"codemirror/addon/fold/brace-fold\";\r\nimport \"codemirror/addon/fold/comment-fold\";\r\nimport \"codemirror/addon/fold/foldcode\";\r\nimport \"codemirror/addon/fold/foldgutter\";\r\nimport \"codemirror/addon/fold/indent-fold\";\r\nimport \"codemirror/addon/fold/markdown-fold\";\r\nimport \"codemirror/addon/fold/xml-fold\";\r\n\r\n// Mode\r\nimport \"codemirror/mode/css/css\";\r\nimport \"codemirror/mode/dockerfile/dockerfile\";\r\nimport \"codemirror/mode/htmlmixed/htmlmixed\";\r\nimport \"codemirror/mode/markdown/markdown\";\r\nimport \"codemirror/mode/php/php\";\r\nimport \"codemirror/mode/python/python\";\r\nimport \"codemirror/mode/sass/sass\";\r\nimport \"codemirror/mode/javascript/javascript\";\r\nimport \"codemirror/mode/sql/sql\";\r\nimport \"codemirror/mode/vue/vue\";\r\n\r\nexport default {\r\n  name: \"projectEdit\",\r\n  data() {\r\n    return {\r\n      projectName: this.$route.params.name,\r\n      clientData: null,\r\n      loading: true,\r\n      tree: [],\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\",\r\n      },\r\n      activeFile: null,\r\n      activeNode: null,\r\n      code: \"Please Choose File from Left to Edit.\",\r\n      modeMap: {\r\n        py: \"text/x-python\",\r\n        js: \"text/javascript\",\r\n        html: \"text/html\",\r\n        vue: \"text/x-vue\",\r\n        md: \"text/x-markdown\",\r\n        scss: \"text/x-sass\",\r\n        css: \"text/x-css\",\r\n        php: \"application/x-httpd-php\",\r\n      },\r\n      editorOptions: {\r\n        tabSize: 4,\r\n        mode: \"text/javascript\",\r\n        theme: \"monokai\",\r\n        lineNumbers: true,\r\n        styleActiveLine: true,\r\n        line: true,\r\n        keyMap: \"sublime\",\r\n        // 按键映射，比如Ctrl键映射autocomplete，autocomplete是hint代码提示事件\r\n        extraKeys: {\r\n          Tab: \"autocomplete\",\r\n        },\r\n        // 代码折叠\r\n        foldGutter: true,\r\n        gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\"],\r\n        // 选中文本自动高亮，及高亮方式\r\n        styleSelectedText: true,\r\n        highlightSelectionMatches: {\r\n          showToken: /\\w/,\r\n          annotateScrollbar: true,\r\n        },\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    PanelTitle,\r\n    codemirror,\r\n  },\r\n  created() {\r\n    this.getProjectTree(this.projectName);\r\n  },\r\n  methods: {\r\n    getProjectTree(name) {\r\n      // 获取目录树\r\n      this.$http\r\n        .get(\r\n          this.formatString(this.$store.state.url.logs.logs_tree, {\r\n            name: name,\r\n          })\r\n        )\r\n        .then(({ data: tree }) => {\r\n          this.tree = tree;\r\n          if (this.tree.length > 0) {\r\n            let lastNode = this.tree[this.tree.length - 1];\r\n            this.onNodeClick(lastNode);\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message.error(this.$store.getters.$lang.messages.errorLoad);\r\n        });\r\n    },\r\n    onNodeClick(data) {\r\n      this.activeNode = data;\r\n      this.onChangeCode(data);\r\n      this.activeFile = this.join(this.activeNode.path, this.activeNode.label);\r\n    },\r\n    // 呈现代码\r\n    onChangeCode(data) {\r\n      // 获取后缀\r\n      let group = this.activeNode.label.split(\".\");\r\n      let extension = group[group.length - 1];\r\n      // 设置Mode\r\n      this.editorOptions.mode = this.modeMap[extension];\r\n      // 加载文件\r\n      if (!data.children) {\r\n        this.$http\r\n          .post(this.$store.state.url.project.fileRead, data)\r\n          .then(({ data: code }) => {\r\n            this.code = code;\r\n          })\r\n          .catch(() => {\r\n            this.$message.error(this.$store.getters.$lang.messages.errorLoad);\r\n          });\r\n      }\r\n    },\r\n    onRenameFile() {\r\n      this.$prompt(\r\n        this.$store.getters.$lang.titles.renameFile,\r\n        this.$store.getters.$lang.buttons.confirm,\r\n        {\r\n          confirmButtonText: this.$store.getters.$lang.buttons.yes,\r\n          cancelButtonText: this.$store.getters.$lang.buttons.no,\r\n          inputValue: this.activeNode.label,\r\n          inputPattern: /[^/\\s]/,\r\n          inputErrorMessage: this.$store.getters.$lang.messages.errorFormat,\r\n        }\r\n      ).then(({ value }) => {\r\n        this.$http\r\n          .post(this.$store.state.url.project.fileRename, {\r\n            path: this.activeNode.path,\r\n            pre: this.activeNode.label,\r\n            new: value,\r\n          })\r\n          .then(() => {\r\n            this.$message.success(\r\n              this.$store.getters.$lang.messages.successSave\r\n            );\r\n            this.getProjectTree(this.projectName);\r\n          })\r\n          .catch(() => {\r\n            this.$message.error(this.$store.getters.$lang.messages.errorSave);\r\n          });\r\n      });\r\n    },\r\n    onCreateFile() {\r\n      this.$prompt(\r\n        this.$store.getters.$lang.titles.createFile,\r\n        this.$store.getters.$lang.buttons.confirm,\r\n        {\r\n          confirmButtonText: this.$store.getters.$lang.buttons.yes,\r\n          cancelButtonText: this.$store.getters.$lang.buttons.no,\r\n          inputValue: this.activeNode.label,\r\n          inputPattern: /[^/\\s]/,\r\n          inputErrorMessage: this.$store.getters.$lang.messages.errorFormat,\r\n        }\r\n      ).then(({ value }) => {\r\n        this.$http\r\n          .post(this.$store.state.url.project.fileCreate, {\r\n            path: this.activeNode.path,\r\n            name: value,\r\n          })\r\n          .then(() => {\r\n            this.$message.success(\r\n              this.$store.getters.$lang.messages.successSave\r\n            );\r\n            this.getProjectTree(this.projectName);\r\n          })\r\n          .catch(() => {\r\n            this.$message.error(this.$store.getters.$lang.messages.errorSave);\r\n          });\r\n      });\r\n    },\r\n    onDeleteFile() {\r\n      this.$confirm(\r\n        this.$store.getters.$lang.messages.confirm,\r\n        this.$store.getters.$lang.buttons.confirm,\r\n        {\r\n          confirmButtonText: this.$store.getters.$lang.buttons.yes,\r\n          cancelButtonText: this.$store.getters.$lang.buttons.no,\r\n          type: \"warning\",\r\n        }\r\n      ).then(() => {\r\n        this.$http\r\n          .post(this.$store.state.url.project.fileDelete, {\r\n            path: this.activeNode.path,\r\n            label: this.activeNode.label,\r\n          })\r\n          .then(() => {\r\n            this.$message.success(\r\n              this.$store.getters.$lang.messages.successDelete\r\n            );\r\n            this.getProjectTree(this.projectName);\r\n          })\r\n          ;\r\n      });\r\n    },\r\n    onEditorCodeChange(code, callback) {\r\n      this.$http\r\n        .post(this.$store.state.url.project.fileUpdate, {\r\n          code: code,\r\n          path: this.activeNode[\"path\"],\r\n          label: this.activeNode[\"label\"],\r\n        })\r\n        .then(() => {\r\n          if (callback) {\r\n            callback();\r\n          }\r\n        })\r\n        ;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.CodeMirror {\r\n  font-size: 16px;\r\n  height: 76vh;\r\n  z-index: 0;\r\n}\r\n\r\n#tree {\r\n  .panel-body {\r\n    overflow: hidden;\r\n  }\r\n  .el-tree {\r\n    overflow-x: scroll;\r\n    height: 76vh;\r\n    border: none;\r\n    div[role=\"treeitem\"] {\r\n      .el-tree-node__content {\r\n        height: 35px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.el-tree-node.is-current {\r\n  background: #eee;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./logs.vue?vue&type=template&id=04b9b3c8&\"\nimport script from \"./logs.vue?vue&type=script&lang=js&\"\nexport * from \"./logs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./logs.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}